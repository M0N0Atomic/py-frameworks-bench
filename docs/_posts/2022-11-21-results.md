---
layout: post
title: Results (2022-11-21)
description: Python Frameworks Benchmark Results (2022-11-21)
date:   (2022-11-21)
categories: results
---

<script src="https://cdn.jsdelivr.net/npm/chart.js@3.2.1/dist/chart.min.js"></script>

> This is a simple benchmark for python async frameworks. Almost all of the
> frameworks are ASGI-compatible (aiohttp and tornado are exceptions on the
> moment). 
> 
> The objective of the benchmark is not testing deployment (like uvicorn vs
> hypercorn and etc) or database (ORM, drivers) but instead test the frameworks
> itself. The benchmark checks request parsing (body, headers, formdata,
> queries), routing, responses.

Read more about the benchmark: [The Methodic](/py-frameworks-bench/about/)

# Table of contents

* [Accept a request and return HTML response with a custom dynamic header](#html)
* [Parse path params, query string, JSON body and return a json response](#api)
* [Parse uploaded file, store it on disk and return a text response](#upload)
* [Composite stats ](#composite)

<canvas id="chart" style="margin-bottom: 2em"></canvas>
<script>
    var ctx = document.getElementById('chart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['blacksheep','muffin','sanic','falcon','starlette','baize','fastapi','aiohttp','quart','tornado','django',],
            datasets: [
                {
                    label: 'Single HTML response (req/s)',
                    data: ['14114','11898','10530','10195','9725','9274','5638','4929','2550','1944','683',],
                    backgroundColor: [
                        '#b9ddf1', '#afd6ed', '#a5cfe9', '#9bc7e4', '#92c0df', '#89b8da', '#80b0d5', '#79aacf', '#72a3c9', '#6a9bc3', '#6394be', '#5b8cb8', '#5485b2', '#4e7fac', '#4878a6', '#437a9f', '#3d6a98', '#376491', '#305d8a', '#2a5783',
                    ].reverse()
                },
                {
                    label: 'Work with JSON (req/s)',
                    data: ['7269','7182','7020','6251','4760','4745','3431','2625','1714','1643','646',],
                    backgroundColor: [
                        '#b3e0a6', '#a5db96', '#98d687', '#8ed07f', '#85ca77', '#7dc370', '#75bc69', '#6eb663', '#67af5c', '#61a956', '#59a253', '#519c51', '#49964f', '#428f4d', '#398949', '#308344', '#2b7c40', '#27763d', '#256f3d', '#24693d',
                    ].reverse()
                },
                {
                    label: 'Upload file (req/s)',
                    data: ['4058','3521','3029','2283','1882','1750','1661','1496','1309','1285','485',],
                    backgroundColor: [
                        '#ffc685', '#fcbe75', '#f9b665', '#f7ae54', '#f5a645', '#f59c3c', '#f49234', '#f2882d', '#f07e27', '#ee7422', '#e96b20', '#e36420', '#db5e20', '#d25921', '#ca5422', '#c14f22', '#b84b23', '#af4623', '#a64122', '#9e3d22',
                    ].reverse()
                },
            ]
        }
    });
</script>

##  Accept a request and return HTML response with a custom dynamic header {#html}

The test simulates just a single HTML response. 

Sorted by max req/s

| Framework | Requests/sec | Latency 50% (ms) | Latency 75% (ms) | Latency Avg (ms) |
| --------- | -----------: | ---------------: | ---------------: | ---------------: |
| [blacksheep](https://pypi.org/project/blacksheep/) `1.2.8` | 14114 | 3.75 | 6.05 | 4.51
| [muffin](https://pypi.org/project/muffin/) `0.87.3` | 11898 | 4.46 | 7.13 | 5.36
| [sanic](https://pypi.org/project/sanic/) `22.9.1` | 10530 | 4.88 | 8.16 | 6.05
| [falcon](https://pypi.org/project/falcon/) `3.1.1` | 10195 | 5.16 | 8.54 | 6.27
| [starlette](https://pypi.org/project/starlette/) `0.22.0` | 9725 | 5.41 | 8.83 | 6.55
| [baize](https://pypi.org/project/baize/) `0.18.2` | 9274 | 5.72 | 9.21 | 6.87
| [fastapi](https://pypi.org/project/fastapi/) `0.87.0` | 5638 | 9.51 | 12.80 | 11.33
| [aiohttp](https://pypi.org/project/aiohttp/) `3.8.3` | 4929 | 12.80 | 13.59 | 12.99
| [quart](https://pypi.org/project/quart/) `0.18.3` | 2550 | 23.67 | 28.13 | 25.19
| [tornado](https://pypi.org/project/tornado/) `6.2` | 1944 | 32.52 | 33.40 | 32.92
| [django](https://pypi.org/project/django/) `4.1.3` | 683 | 86.85 | 102.57 | 93.63


## Parse path params, query string, JSON body and return a json response  {#api}
The test simulates a simple JSON REST API endpoint.  

Sorted by max req/s

| Framework | Requests/sec | Latency 50% (ms) | Latency 75% (ms) | Latency Avg (ms) |
| --------- | -----------: | ---------------: | ---------------: | ---------------: |
| [blacksheep](https://pypi.org/project/blacksheep/) `1.2.8` | 7269 | 7.23 | 11.88 | 8.80
| [sanic](https://pypi.org/project/sanic/) `22.9.1` | 7182 | 7.27 | 11.85 | 8.89
| [muffin](https://pypi.org/project/muffin/) `0.87.3` | 7020 | 7.49 | 12.45 | 9.09
| [falcon](https://pypi.org/project/falcon/) `3.1.1` | 6251 | 8.63 | 11.57 | 10.22
| [starlette](https://pypi.org/project/starlette/) `0.22.0` | 4760 | 11.68 | 12.68 | 13.42
| [baize](https://pypi.org/project/baize/) `0.18.2` | 4745 | 13.37 | 14.63 | 13.48
| [fastapi](https://pypi.org/project/fastapi/) `0.87.0` | 3431 | 16.13 | 19.16 | 18.63
| [aiohttp](https://pypi.org/project/aiohttp/) `3.8.3` | 2625 | 24.21 | 25.29 | 24.38
| [quart](https://pypi.org/project/quart/) `0.18.3` | 1714 | 36.68 | 39.33 | 37.32
| [tornado](https://pypi.org/project/tornado/) `6.2` | 1643 | 38.24 | 39.66 | 38.94
| [django](https://pypi.org/project/django/) `4.1.3` | 646 | 91.81 | 110.16 | 98.88


## Parse uploaded file, store it on disk and return a text response  {#upload}
The test simulates multipart formdata processing and work with files.  

Sorted by max req/s

| Framework | Requests/sec | Latency 50% (ms) | Latency 75% (ms) | Latency Avg (ms) |
| --------- | -----------: | ---------------: | ---------------: | ---------------: |
| [blacksheep](https://pypi.org/project/blacksheep/) `1.2.8` | 4058 | 12.78 | 21.91 | 15.75
| [sanic](https://pypi.org/project/sanic/) `22.9.1` | 3521 | 14.46 | 24.48 | 18.14
| [muffin](https://pypi.org/project/muffin/) `0.87.3` | 3029 | 17.20 | 29.55 | 21.10
| [falcon](https://pypi.org/project/falcon/) `3.1.1` | 2283 | 23.31 | 30.58 | 28.11
| [baize](https://pypi.org/project/baize/) `0.18.2` | 1882 | 32.93 | 37.52 | 33.99
| [aiohttp](https://pypi.org/project/aiohttp/) `3.8.3` | 1750 | 36.38 | 37.73 | 36.53
| [starlette](https://pypi.org/project/starlette/) `0.22.0` | 1661 | 32.68 | 39.08 | 38.49
| [fastapi](https://pypi.org/project/fastapi/) `0.87.0` | 1496 | 35.63 | 44.38 | 42.69
| [quart](https://pypi.org/project/quart/) `0.18.3` | 1309 | 48.73 | 51.49 | 48.87
| [tornado](https://pypi.org/project/tornado/) `6.2` | 1285 | 49.01 | 50.45 | 49.77
| [django](https://pypi.org/project/django/) `4.1.3` | 485 | 121.99 | 143.72 | 131.45


## Composite stats {#composite}
Combined benchmarks results

Sorted by completed requests

| Framework | Requests completed | Avg Latency 50% (ms) | Avg Latency 75% (ms) | Avg Latency (ms) |
| --------- | -----------------: | -------------------: | -------------------: | ---------------: |
| [blacksheep](https://pypi.org/project/blacksheep/) `1.2.8` | 381615 | 7.92 | 13.28 | 9.69
| [muffin](https://pypi.org/project/muffin/) `0.87.3` | 329205 | 9.72 | 16.38 | 11.85
| [sanic](https://pypi.org/project/sanic/) `22.9.1` | 318495 | 8.87 | 14.83 | 11.03
| [falcon](https://pypi.org/project/falcon/) `3.1.1` | 280935 | 12.37 | 16.9 | 14.87
| [starlette](https://pypi.org/project/starlette/) `0.22.0` | 242190 | 16.59 | 20.2 | 19.49
| [baize](https://pypi.org/project/baize/) `0.18.2` | 238515 | 17.34 | 20.45 | 18.11
| [fastapi](https://pypi.org/project/fastapi/) `0.87.0` | 158475 | 20.42 | 25.45 | 24.22
| [aiohttp](https://pypi.org/project/aiohttp/) `3.8.3` | 139560 | 24.46 | 25.54 | 24.63
| [quart](https://pypi.org/project/quart/) `0.18.3` | 83595 | 36.36 | 39.65 | 37.13
| [tornado](https://pypi.org/project/tornado/) `6.2` | 73080 | 39.92 | 41.17 | 40.54
| [django](https://pypi.org/project/django/) `4.1.3` | 27210 | 100.22 | 118.82 | 107.99
